var le=(_,T)=>()=>(T||_((T={exports:{}}).exports,T),T.exports);var ce=le((z,Z)=>{/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 */(function(_,T){typeof z=="object"&&typeof Z=="object"?Z.exports=T():typeof define=="function"&&define.amd?define("Matter",[],T):typeof z=="object"?z.Matter=T():_.Matter=T()})(void 0,(function(){return(function(_){var T={};function f(e){if(T[e])return T[e].exports;var c=T[e]={i:e,l:!1,exports:{}};return _[e].call(c.exports,c,c.exports,f),c.l=!0,c.exports}return f.m=_,f.c=T,f.d=function(e,c,s){f.o(e,c)||Object.defineProperty(e,c,{enumerable:!0,get:s})},f.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,c){if(1&c&&(e=f(e)),8&c||4&c&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(f.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&c&&typeof e!="string")for(var a in e)f.d(s,a,(function(p){return e[p]}).bind(null,a));return s},f.n=function(e){var c=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(c,"a",c),c},f.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,c)},f.p="",f(f.s=20)})([function(_,T){var f={};_.exports=f,(function(){f._baseDelta=1e3/60,f._nextId=0,f._seed=0,f._nowStartTime=+new Date,f._warnedOnce={},f._decomp=null,f.extend=function(c,s){var a,p;typeof s=="boolean"?(a=2,p=s):(a=1,p=!0);for(var i=a;i<arguments.length;i++){var u=arguments[i];if(u)for(var o in u)p&&u[o]&&u[o].constructor===Object?c[o]&&c[o].constructor!==Object?c[o]=u[o]:(c[o]=c[o]||{},f.extend(c[o],p,u[o])):c[o]=u[o]}return c},f.clone=function(c,s){return f.extend({},s,c)},f.keys=function(c){if(Object.keys)return Object.keys(c);var s=[];for(var a in c)s.push(a);return s},f.values=function(c){var s=[];if(Object.keys){for(var a=Object.keys(c),p=0;p<a.length;p++)s.push(c[a[p]]);return s}for(var i in c)s.push(c[i]);return s},f.get=function(c,s,a,p){s=s.split(".").slice(a,p);for(var i=0;i<s.length;i+=1)c=c[s[i]];return c},f.set=function(c,s,a,p,i){var u=s.split(".").slice(p,i);return f.get(c,s,0,-1)[u[u.length-1]]=a,a},f.shuffle=function(c){for(var s=c.length-1;s>0;s--){var a=Math.floor(f.random()*(s+1)),p=c[s];c[s]=c[a],c[a]=p}return c},f.choose=function(c){return c[Math.floor(f.random()*c.length)]},f.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},f.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},f.isFunction=function(c){return typeof c=="function"},f.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},f.isString=function(c){return toString.call(c)==="[object String]"},f.clamp=function(c,s,a){return c<s?s:c>a?a:c},f.sign=function(c){return c<0?-1:1},f.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-f._nowStartTime},f.random=function(c,s){return s=s!==void 0?s:1,(c=c!==void 0?c:0)+e()*(s-c)};var e=function(){return f._seed=(9301*f._seed+49297)%233280,f._seed/233280};f.colorToNumber=function(c){return(c=c.replace("#","")).length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},f.logLevel=1,f.log=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.info=function(){console&&f.logLevel>0&&f.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warn=function(){console&&f.logLevel>0&&f.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},f.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");f._warnedOnce[c]||(f.warn(c),f._warnedOnce[c]=!0)},f.deprecated=function(c,s,a){c[s]=f.chain((function(){f.warnOnce("🔅 deprecated 🔅",a)}),c[s])},f.nextId=function(){return f._nextId++},f.indexOf=function(c,s){if(c.indexOf)return c.indexOf(s);for(var a=0;a<c.length;a++)if(c[a]===s)return a;return-1},f.map=function(c,s){if(c.map)return c.map(s);for(var a=[],p=0;p<c.length;p+=1)a.push(s(c[p]));return a},f.topologicalSort=function(c){var s=[],a=[],p=[];for(var i in c)a[i]||p[i]||f._topologicalSort(i,a,p,c,s);return s},f._topologicalSort=function(c,s,a,p,i){var u=p[c]||[];a[c]=!0;for(var o=0;o<u.length;o+=1){var t=u[o];a[t]||s[t]||f._topologicalSort(t,s,a,p,i)}a[c]=!1,s[c]=!0,i.push(c)},f.chain=function(){for(var c=[],s=0;s<arguments.length;s+=1){var a=arguments[s];a._chained?c.push.apply(c,a._chained):c.push(a)}var p=function(){for(var i,u=new Array(arguments.length),o=0,t=arguments.length;o<t;o++)u[o]=arguments[o];for(o=0;o<c.length;o+=1){var n=c[o].apply(i,u);n!==void 0&&(i=n)}return i};return p._chained=c,p},f.chainPathBefore=function(c,s,a){return f.set(c,s,f.chain(a,f.get(c,s)))},f.chainPathAfter=function(c,s,a){return f.set(c,s,f.chain(f.get(c,s),a))},f.setDecomp=function(c){f._decomp=c},f.getDecomp=function(){var c=f._decomp;try{c||typeof window>"u"||(c=window.decomp),c||typeof global>"u"||(c=global.decomp)}catch{c=null}return c}})()},function(_,T){var f={};_.exports=f,f.create=function(e){var c={min:{x:0,y:0},max:{x:0,y:0}};return e&&f.update(c,e),c},f.update=function(e,c,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var a=0;a<c.length;a++){var p=c[a];p.x>e.max.x&&(e.max.x=p.x),p.x<e.min.x&&(e.min.x=p.x),p.y>e.max.y&&(e.max.y=p.y),p.y<e.min.y&&(e.min.y=p.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},f.contains=function(e,c){return c.x>=e.min.x&&c.x<=e.max.x&&c.y>=e.min.y&&c.y<=e.max.y},f.overlaps=function(e,c){return e.min.x<=c.max.x&&e.max.x>=c.min.x&&e.max.y>=c.min.y&&e.min.y<=c.max.y},f.translate=function(e,c){e.min.x+=c.x,e.max.x+=c.x,e.min.y+=c.y,e.max.y+=c.y},f.shift=function(e,c){var s=e.max.x-e.min.x,a=e.max.y-e.min.y;e.min.x=c.x,e.max.x=c.x+s,e.min.y=c.y,e.max.y=c.y+a}},function(_,T){var f={};_.exports=f,f.create=function(e,c){return{x:e||0,y:c||0}},f.clone=function(e){return{x:e.x,y:e.y}},f.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},f.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},f.rotate=function(e,c,s){var a=Math.cos(c),p=Math.sin(c);s||(s={});var i=e.x*a-e.y*p;return s.y=e.x*p+e.y*a,s.x=i,s},f.rotateAbout=function(e,c,s,a){var p=Math.cos(c),i=Math.sin(c);a||(a={});var u=s.x+((e.x-s.x)*p-(e.y-s.y)*i);return a.y=s.y+((e.x-s.x)*i+(e.y-s.y)*p),a.x=u,a},f.normalise=function(e){var c=f.magnitude(e);return c===0?{x:0,y:0}:{x:e.x/c,y:e.y/c}},f.dot=function(e,c){return e.x*c.x+e.y*c.y},f.cross=function(e,c){return e.x*c.y-e.y*c.x},f.cross3=function(e,c,s){return(c.x-e.x)*(s.y-e.y)-(c.y-e.y)*(s.x-e.x)},f.add=function(e,c,s){return s||(s={}),s.x=e.x+c.x,s.y=e.y+c.y,s},f.sub=function(e,c,s){return s||(s={}),s.x=e.x-c.x,s.y=e.y-c.y,s},f.mult=function(e,c){return{x:e.x*c,y:e.y*c}},f.div=function(e,c){return{x:e.x/c,y:e.y/c}},f.perp=function(e,c){return{x:(c=c===!0?-1:1)*-e.y,y:c*e.x}},f.neg=function(e){return{x:-e.x,y:-e.y}},f.angle=function(e,c){return Math.atan2(c.y-e.y,c.x-e.x)},f._temp=[f.create(),f.create(),f.create(),f.create(),f.create(),f.create()]},function(_,T,f){var e={};_.exports=e;var c=f(2),s=f(0);e.create=function(a,p){for(var i=[],u=0;u<a.length;u++){var o=a[u],t={x:o.x,y:o.y,index:u,body:p,isInternal:!1};i.push(t)}return i},e.fromPath=function(a,p){var i=[];return a.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(u,o,t){i.push({x:parseFloat(o),y:parseFloat(t)})})),e.create(i,p)},e.centre=function(a){for(var p,i,u,o=e.area(a,!0),t={x:0,y:0},n=0;n<a.length;n++)u=(n+1)%a.length,p=c.cross(a[n],a[u]),i=c.mult(c.add(a[n],a[u]),p),t=c.add(t,i);return c.div(t,6*o)},e.mean=function(a){for(var p={x:0,y:0},i=0;i<a.length;i++)p.x+=a[i].x,p.y+=a[i].y;return c.div(p,a.length)},e.area=function(a,p){for(var i=0,u=a.length-1,o=0;o<a.length;o++)i+=(a[u].x-a[o].x)*(a[u].y+a[o].y),u=o;return p?i/2:Math.abs(i)/2},e.inertia=function(a,p){for(var i,u,o=0,t=0,n=a,r=0;r<n.length;r++)u=(r+1)%n.length,o+=(i=Math.abs(c.cross(n[u],n[r])))*(c.dot(n[u],n[u])+c.dot(n[u],n[r])+c.dot(n[r],n[r])),t+=i;return p/6*(o/t)},e.translate=function(a,p,i){i=i!==void 0?i:1;var u,o=a.length,t=p.x*i,n=p.y*i;for(u=0;u<o;u++)a[u].x+=t,a[u].y+=n;return a},e.rotate=function(a,p,i){if(p!==0){var u,o,t,n,r=Math.cos(p),l=Math.sin(p),g=i.x,h=i.y,b=a.length;for(n=0;n<b;n++)o=(u=a[n]).x-g,t=u.y-h,u.x=g+(o*r-t*l),u.y=h+(o*l+t*r);return a}},e.contains=function(a,p){for(var i,u=p.x,o=p.y,t=a.length,n=a[t-1],r=0;r<t;r++){if(i=a[r],(u-n.x)*(i.y-n.y)+(o-n.y)*(n.x-i.x)>0)return!1;n=i}return!0},e.scale=function(a,p,i,u){if(p===1&&i===1)return a;var o,t;u=u||e.centre(a);for(var n=0;n<a.length;n++)o=a[n],t=c.sub(o,u),a[n].x=u.x+t.x*p,a[n].y=u.y+t.y*i;return a},e.chamfer=function(a,p,i,u,o){p=typeof p=="number"?[p]:p||[8],i=i!==void 0?i:-1,u=u||2,o=o||14;for(var t=[],n=0;n<a.length;n++){var r=a[n-1>=0?n-1:a.length-1],l=a[n],g=a[(n+1)%a.length],h=p[n<p.length?n:p.length-1];if(h!==0){var b=c.normalise({x:l.y-r.y,y:r.x-l.x}),w=c.normalise({x:g.y-l.y,y:l.x-g.x}),d=Math.sqrt(2*Math.pow(h,2)),y=c.mult(s.clone(b),h),x=c.normalise(c.mult(c.add(b,w),.5)),v=c.sub(l,c.mult(x,d)),m=i;i===-1&&(m=1.75*Math.pow(h,.32)),(m=s.clamp(m,u,o))%2==1&&(m+=1);for(var S=Math.acos(c.dot(b,w))/m,P=0;P<m;P++)t.push(c.add(c.rotate(y,S*P),v))}else t.push(l)}return t},e.clockwiseSort=function(a){var p=e.mean(a);return a.sort((function(i,u){return c.angle(p,i)-c.angle(p,u)})),a},e.isConvex=function(a){var p,i,u,o,t=0,n=a.length;if(n<3)return null;for(p=0;p<n;p++)if(u=(p+2)%n,o=(a[i=(p+1)%n].x-a[p].x)*(a[u].y-a[i].y),(o-=(a[i].y-a[p].y)*(a[u].x-a[i].x))<0?t|=1:o>0&&(t|=2),t===3)return!1;return t!==0||null},e.hull=function(a){var p,i,u=[],o=[];for((a=a.slice(0)).sort((function(t,n){var r=t.x-n.x;return r!==0?r:t.y-n.y})),i=0;i<a.length;i+=1){for(p=a[i];o.length>=2&&c.cross3(o[o.length-2],o[o.length-1],p)<=0;)o.pop();o.push(p)}for(i=a.length-1;i>=0;i-=1){for(p=a[i];u.length>=2&&c.cross3(u[u.length-2],u[u.length-1],p)<=0;)u.pop();u.push(p)}return u.pop(),o.pop(),u.concat(o)}},function(_,T,f){var e={};_.exports=e;var c=f(3),s=f(2),a=f(7),p=f(0),i=f(1),u=f(11);(function(){e._timeCorrection=!0,e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e._baseDelta=1e3/60,e.create=function(t){var n={id:p.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},r=p.extend(n,t);return o(r,t),r},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||i.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),c.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),i.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var r=t.isStatic?"#14151f":p.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),l=t.isStatic?"#555":"#ccc",g=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||r,t.render.strokeStyle=t.render.strokeStyle||l,t.render.lineWidth=t.render.lineWidth||g,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,r){var l;for(l in typeof n=="string"&&(l=n,(n={})[l]=r),n)if(Object.prototype.hasOwnProperty.call(n,l))switch(r=n[l],l){case"isStatic":e.setStatic(t,r);break;case"isSleeping":a.set(t,r);break;case"mass":e.setMass(t,r);break;case"density":e.setDensity(t,r);break;case"inertia":e.setInertia(t,r);break;case"vertices":e.setVertices(t,r);break;case"position":e.setPosition(t,r);break;case"angle":e.setAngle(t,r);break;case"velocity":e.setVelocity(t,r);break;case"angularVelocity":e.setAngularVelocity(t,r);break;case"speed":e.setSpeed(t,r);break;case"angularSpeed":e.setAngularSpeed(t,r);break;case"parts":e.setParts(t,r);break;case"centre":e.setCentre(t,r);break;default:t[l]=r}},e.setStatic=function(t,n){for(var r=0;r<t.parts.length;r++){var l=t.parts[r];n?(l.isStatic||(l._original={restitution:l.restitution,friction:l.friction,mass:l.mass,inertia:l.inertia,density:l.density,inverseMass:l.inverseMass,inverseInertia:l.inverseInertia}),l.restitution=0,l.friction=1,l.mass=l.inertia=l.density=1/0,l.inverseMass=l.inverseInertia=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.angularVelocity=0,l.speed=0,l.angularSpeed=0,l.motion=0):l._original&&(l.restitution=l._original.restitution,l.friction=l._original.friction,l.mass=l._original.mass,l.inertia=l._original.inertia,l.density=l._original.density,l.inverseMass=l._original.inverseMass,l.inverseInertia=l._original.inverseInertia,l._original=null),l.isStatic=n}},e.setMass=function(t,n){var r=t.inertia/(t.mass/6);t.inertia=r*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=c.create(n,t),t.axes=u.fromVertices(t.vertices),t.area=c.area(t.vertices),e.setMass(t,t.density*t.area);var r=c.centre(t.vertices);c.translate(t.vertices,r,-1),e.setInertia(t,e._inertiaScale*c.inertia(t.vertices,t.mass)),c.translate(t.vertices,t.position),i.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,r){var l;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,l=0;l<n.length;l++){var g=n[l];g!==t&&(g.parent=t,t.parts.push(g))}if(t.parts.length!==1){if(r=r===void 0||r){var h=[];for(l=0;l<n.length;l++)h=h.concat(n[l].vertices);c.clockwiseSort(h);var b=c.hull(h),w=c.centre(b);e.setVertices(t,b),c.translate(t.vertices,w)}var d=e._totalProperties(t);t.area=d.area,t.parent=t,t.position.x=d.centre.x,t.position.y=d.centre.y,t.positionPrev.x=d.centre.x,t.positionPrev.y=d.centre.y,e.setMass(t,d.mass),e.setInertia(t,d.inertia),e.setPosition(t,d.centre)}},e.setCentre=function(t,n,r){r?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n,r){var l=s.sub(n,t.position);r?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=l.x,t.velocity.y=l.y,t.speed=s.magnitude(l)):(t.positionPrev.x+=l.x,t.positionPrev.y+=l.y);for(var g=0;g<t.parts.length;g++){var h=t.parts[g];h.position.x+=l.x,h.position.y+=l.y,c.translate(h.vertices,l),i.update(h.bounds,h.vertices,t.velocity)}},e.setAngle=function(t,n,r){var l=n-t.angle;r?(t.anglePrev=t.angle,t.angularVelocity=l,t.angularSpeed=Math.abs(l)):t.anglePrev+=l;for(var g=0;g<t.parts.length;g++){var h=t.parts[g];h.angle+=l,c.rotate(h.vertices,l,t.position),u.rotate(h.axes,l),i.update(h.bounds,h.vertices,t.velocity),g>0&&s.rotateAbout(h.position,l,t.position,h.position)}},e.setVelocity=function(t,n){var r=t.deltaTime/e._baseDelta;t.positionPrev.x=t.position.x-n.x*r,t.positionPrev.y=t.position.y-n.y*r,t.velocity.x=(t.position.x-t.positionPrev.x)/r,t.velocity.y=(t.position.y-t.positionPrev.y)/r,t.speed=s.magnitude(t.velocity)},e.getVelocity=function(t){var n=e._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*n,y:(t.position.y-t.positionPrev.y)*n}},e.getSpeed=function(t){return s.magnitude(e.getVelocity(t))},e.setSpeed=function(t,n){e.setVelocity(t,s.mult(s.normalise(e.getVelocity(t)),n))},e.setAngularVelocity=function(t,n){var r=t.deltaTime/e._baseDelta;t.anglePrev=t.angle-n*r,t.angularVelocity=(t.angle-t.anglePrev)/r,t.angularSpeed=Math.abs(t.angularVelocity)},e.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*e._baseDelta/t.deltaTime},e.getAngularSpeed=function(t){return Math.abs(e.getAngularVelocity(t))},e.setAngularSpeed=function(t,n){e.setAngularVelocity(t,p.sign(e.getAngularVelocity(t))*n)},e.translate=function(t,n,r){e.setPosition(t,s.add(t.position,n),r)},e.rotate=function(t,n,r,l){if(r){var g=Math.cos(n),h=Math.sin(n),b=t.position.x-r.x,w=t.position.y-r.y;e.setPosition(t,{x:r.x+(b*g-w*h),y:r.y+(b*h+w*g)},l),e.setAngle(t,t.angle+n,l)}else e.setAngle(t,t.angle+n,l)},e.scale=function(t,n,r,l){var g=0,h=0;l=l||t.position;for(var b=0;b<t.parts.length;b++){var w=t.parts[b];c.scale(w.vertices,n,r,l),w.axes=u.fromVertices(w.vertices),w.area=c.area(w.vertices),e.setMass(w,t.density*w.area),c.translate(w.vertices,{x:-w.position.x,y:-w.position.y}),e.setInertia(w,e._inertiaScale*c.inertia(w.vertices,w.mass)),c.translate(w.vertices,{x:w.position.x,y:w.position.y}),b>0&&(g+=w.area,h+=w.inertia),w.position.x=l.x+(w.position.x-l.x)*n,w.position.y=l.y+(w.position.y-l.y)*r,i.update(w.bounds,w.vertices,t.velocity)}t.parts.length>1&&(t.area=g,t.isStatic||(e.setMass(t,t.density*g),e.setInertia(t,h))),t.circleRadius&&(n===r?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n){var r=(n=(n!==void 0?n:16.666666666666668)*t.timeScale)*n,l=e._timeCorrection?n/(t.deltaTime||n):1,g=1-t.frictionAir*(n/p._baseDelta),h=(t.position.x-t.positionPrev.x)*l,b=(t.position.y-t.positionPrev.y)*l;t.velocity.x=h*g+t.force.x/t.mass*r,t.velocity.y=b*g+t.force.y/t.mass*r,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=n,t.angularVelocity=(t.angle-t.anglePrev)*g*l+t.torque/t.inertia*r,t.anglePrev=t.angle,t.angle+=t.angularVelocity;for(var w=0;w<t.parts.length;w++){var d=t.parts[w];c.translate(d.vertices,t.velocity),w>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(c.rotate(d.vertices,t.angularVelocity,t.position),u.rotate(d.axes,t.angularVelocity),w>0&&s.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),i.update(d.bounds,d.vertices,t.velocity)}},e.updateVelocities=function(t){var n=e._baseDelta/t.deltaTime,r=t.velocity;r.x=(t.position.x-t.positionPrev.x)*n,r.y=(t.position.y-t.positionPrev.y)*n,t.speed=Math.sqrt(r.x*r.x+r.y*r.y),t.angularVelocity=(t.angle-t.anglePrev)*n,t.angularSpeed=Math.abs(t.angularVelocity)},e.applyForce=function(t,n,r){var l=n.x-t.position.x,g=n.y-t.position.y;t.force.x+=r.x,t.force.y+=r.y,t.torque+=l*r.y-g*r.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},r=t.parts.length===1?0:1;r<t.parts.length;r++){var l=t.parts[r],g=l.mass!==1/0?l.mass:1;n.mass+=g,n.area+=l.area,n.inertia+=l.inertia,n.centre=s.add(n.centre,s.mult(l.position,g))}return n.centre=s.div(n.centre,n.mass),n}})()},function(_,T,f){var e={};_.exports=e;var c=f(0);e.on=function(s,a,p){for(var i,u=a.split(" "),o=0;o<u.length;o++)i=u[o],s.events=s.events||{},s.events[i]=s.events[i]||[],s.events[i].push(p);return p},e.off=function(s,a,p){if(a){typeof a=="function"&&(p=a,a=c.keys(s.events).join(" "));for(var i=a.split(" "),u=0;u<i.length;u++){var o=s.events[i[u]],t=[];if(p&&o)for(var n=0;n<o.length;n++)o[n]!==p&&t.push(o[n]);s.events[i[u]]=t}}else s.events={}},e.trigger=function(s,a,p){var i,u,o,t,n=s.events;if(n&&c.keys(n).length>0){p||(p={}),i=a.split(" ");for(var r=0;r<i.length;r++)if(o=n[u=i[r]]){(t=c.clone(p,!1)).name=u,t.source=s;for(var l=0;l<o.length;l++)o[l].apply(s,[t])}}}},function(_,T,f){var e={};_.exports=e;var c=f(5),s=f(0),a=f(1),p=f(4);e.create=function(i){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},e.setModified=function(i,u,o,t){if(i.isModified=u,u&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),o&&i.parent&&e.setModified(i.parent,u,o,t),t)for(var n=0;n<i.composites.length;n++){var r=i.composites[n];e.setModified(r,u,o,t)}},e.add=function(i,u){var o=[].concat(u);c.trigger(i,"beforeAdd",{object:u});for(var t=0;t<o.length;t++){var n=o[t];switch(n.type){case"body":if(n.parent!==n){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,n);break;case"constraint":e.addConstraint(i,n);break;case"composite":e.addComposite(i,n);break;case"mouseConstraint":e.addConstraint(i,n.constraint)}}return c.trigger(i,"afterAdd",{object:u}),i},e.remove=function(i,u,o){var t=[].concat(u);c.trigger(i,"beforeRemove",{object:u});for(var n=0;n<t.length;n++){var r=t[n];switch(r.type){case"body":e.removeBody(i,r,o);break;case"constraint":e.removeConstraint(i,r,o);break;case"composite":e.removeComposite(i,r,o);break;case"mouseConstraint":e.removeConstraint(i,r.constraint)}}return c.trigger(i,"afterRemove",{object:u}),i},e.addComposite=function(i,u){return i.composites.push(u),u.parent=i,e.setModified(i,!0,!0,!1),i},e.removeComposite=function(i,u,o){var t=s.indexOf(i.composites,u);if(t!==-1){var n=e.allBodies(u);e.removeCompositeAt(i,t);for(var r=0;r<n.length;r++)n[r].sleepCounter=0}if(o)for(r=0;r<i.composites.length;r++)e.removeComposite(i.composites[r],u,!0);return i},e.removeCompositeAt=function(i,u){return i.composites.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addBody=function(i,u){return i.bodies.push(u),e.setModified(i,!0,!0,!1),i},e.removeBody=function(i,u,o){var t=s.indexOf(i.bodies,u);if(t!==-1&&(e.removeBodyAt(i,t),u.sleepCounter=0),o)for(var n=0;n<i.composites.length;n++)e.removeBody(i.composites[n],u,!0);return i},e.removeBodyAt=function(i,u){return i.bodies.splice(u,1),e.setModified(i,!0,!0,!1),i},e.addConstraint=function(i,u){return i.constraints.push(u),e.setModified(i,!0,!0,!1),i},e.removeConstraint=function(i,u,o){var t=s.indexOf(i.constraints,u);if(t!==-1&&e.removeConstraintAt(i,t),o)for(var n=0;n<i.composites.length;n++)e.removeConstraint(i.composites[n],u,!0);return i},e.removeConstraintAt=function(i,u){return i.constraints.splice(u,1),e.setModified(i,!0,!0,!1),i},e.clear=function(i,u,o){if(o)for(var t=0;t<i.composites.length;t++)e.clear(i.composites[t],u,!0);return u?i.bodies=i.bodies.filter((function(n){return n.isStatic})):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,e.setModified(i,!0,!0,!1),i},e.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var u=[].concat(i.bodies),o=0;o<i.composites.length;o++)u=u.concat(e.allBodies(i.composites[o]));return i.cache&&(i.cache.allBodies=u),u},e.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var u=[].concat(i.constraints),o=0;o<i.composites.length;o++)u=u.concat(e.allConstraints(i.composites[o]));return i.cache&&(i.cache.allConstraints=u),u},e.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var u=[].concat(i.composites),o=0;o<i.composites.length;o++)u=u.concat(e.allComposites(i.composites[o]));return i.cache&&(i.cache.allComposites=u),u},e.get=function(i,u,o){var t,n;switch(o){case"body":t=e.allBodies(i);break;case"constraint":t=e.allConstraints(i);break;case"composite":t=e.allComposites(i).concat(i)}return t?(n=t.filter((function(r){return r.id.toString()===u.toString()}))).length===0?null:n[0]:null},e.move=function(i,u,o){return e.remove(i,u),e.add(o,u),i},e.rebase=function(i){for(var u=e.allBodies(i).concat(e.allConstraints(i)).concat(e.allComposites(i)),o=0;o<u.length;o++)u[o].id=s.nextId();return i},e.translate=function(i,u,o){for(var t=o?e.allBodies(i):i.bodies,n=0;n<t.length;n++)p.translate(t[n],u);return i},e.rotate=function(i,u,o,t){for(var n=Math.cos(u),r=Math.sin(u),l=t?e.allBodies(i):i.bodies,g=0;g<l.length;g++){var h=l[g],b=h.position.x-o.x,w=h.position.y-o.y;p.setPosition(h,{x:o.x+(b*n-w*r),y:o.y+(b*r+w*n)}),p.rotate(h,u)}return i},e.scale=function(i,u,o,t,n){for(var r=n?e.allBodies(i):i.bodies,l=0;l<r.length;l++){var g=r[l],h=g.position.x-t.x,b=g.position.y-t.y;p.setPosition(g,{x:t.x+h*u,y:t.y+b*o}),p.scale(g,u,o)}return i},e.bounds=function(i){for(var u=e.allBodies(i),o=[],t=0;t<u.length;t+=1){var n=u[t];o.push(n.bounds.min,n.bounds.max)}return a.create(o)}},function(_,T,f){var e={};_.exports=e;var c=f(4),s=f(5),a=f(0);e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(p,i){for(var u=i/a._baseDelta,o=e._motionSleepThreshold,t=0;t<p.length;t++){var n=p[t],r=c.getSpeed(n),l=c.getAngularSpeed(n),g=r*r+l*l;if(n.force.x===0&&n.force.y===0){var h=Math.min(n.motion,g),b=Math.max(n.motion,g);n.motion=e._minBias*h+(1-e._minBias)*b,n.sleepThreshold>0&&n.motion<o?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold/u&&e.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}else e.set(n,!1)}},e.afterCollisions=function(p){for(var i=e._motionSleepThreshold,u=0;u<p.length;u++){var o=p[u];if(o.isActive){var t=o.collision,n=t.bodyA.parent,r=t.bodyB.parent;if(!(n.isSleeping&&r.isSleeping||n.isStatic||r.isStatic)&&(n.isSleeping||r.isSleeping)){var l=n.isSleeping&&!n.isStatic?n:r,g=l===n?r:n;!l.isStatic&&g.motion>i&&e.set(l,!1)}}}},e.set=function(p,i){var u=p.isSleeping;i?(p.isSleeping=!0,p.sleepCounter=p.sleepThreshold,p.positionImpulse.x=0,p.positionImpulse.y=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.speed=0,p.angularSpeed=0,p.motion=0,u||s.trigger(p,"sleepStart")):(p.isSleeping=!1,p.sleepCounter=0,u&&s.trigger(p,"sleepEnd"))}},function(_,T,f){var e={};_.exports=e;var c,s,a,p=f(3),i=f(9);c=[],s={overlap:0,axis:null},a={overlap:0,axis:null},e.create=function(u,o){return{pair:null,collided:!1,bodyA:u,bodyB:o,parentA:u.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},e.collides=function(u,o,t){if(e._overlapAxes(s,u.vertices,o.vertices,u.axes),s.overlap<=0||(e._overlapAxes(a,o.vertices,u.vertices,o.axes),a.overlap<=0))return null;var n,r,l=t&&t.table[i.id(u,o)];l?n=l.collision:((n=e.create(u,o)).collided=!0,n.bodyA=u.id<o.id?u:o,n.bodyB=u.id<o.id?o:u,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),u=n.bodyA,o=n.bodyB,r=s.overlap<a.overlap?s:a;var g=n.normal,h=n.tangent,b=n.penetration,w=n.supports,d=r.overlap,y=r.axis,x=y.x,v=y.y;x*(o.position.x-u.position.x)+v*(o.position.y-u.position.y)>=0&&(x=-x,v=-v),g.x=x,g.y=v,h.x=-v,h.y=x,b.x=x*d,b.y=v*d,n.depth=d;var m=e._findSupports(u,o,g,1),S=0;if(p.contains(u.vertices,m[0])&&(w[S++]=m[0]),p.contains(u.vertices,m[1])&&(w[S++]=m[1]),S<2){var P=e._findSupports(o,u,g,-1);p.contains(o.vertices,P[0])&&(w[S++]=P[0]),S<2&&p.contains(o.vertices,P[1])&&(w[S++]=P[1])}return S===0&&(w[S++]=m[0]),n.supportCount=S,n},e._overlapAxes=function(u,o,t,n){var r,l,g,h,b,w,d=o.length,y=t.length,x=o[0].x,v=o[0].y,m=t[0].x,S=t[0].y,P=n.length,A=Number.MAX_VALUE,B=0;for(b=0;b<P;b++){var C=n[b],M=C.x,k=C.y,I=x*M+v*k,R=m*M+S*k,D=I,E=R;for(w=1;w<d;w+=1)(h=o[w].x*M+o[w].y*k)>D?D=h:h<I&&(I=h);for(w=1;w<y;w+=1)(h=t[w].x*M+t[w].y*k)>E?E=h:h<R&&(R=h);if((r=(l=D-R)<(g=E-I)?l:g)<A&&(A=r,B=b,r<=0))break}u.axis=n[B],u.overlap=A},e._findSupports=function(u,o,t,n){var r,l,g,h=o.vertices,b=h.length,w=u.position.x,d=u.position.y,y=t.x*n,x=t.y*n,v=h[0],m=v,S=y*(w-m.x)+x*(d-m.y);for(g=1;g<b;g+=1)(l=y*(w-(m=h[g]).x)+x*(d-m.y))<S&&(S=l,v=m);return S=y*(w-(r=h[(b+v.index-1)%b]).x)+x*(d-r.y),y*(w-(m=h[(v.index+1)%b]).x)+x*(d-m.y)<S?(c[0]=v,c[1]=m,c):(c[0]=v,c[1]=r,c)}},function(_,T,f){var e={};_.exports=e;var c=f(16);e.create=function(s,a){var p=s.bodyA,i=s.bodyB,u={id:e.id(p,i),bodyA:p,bodyB:i,collision:s,contacts:[c.create(),c.create()],contactCount:0,separation:0,isActive:!0,isSensor:p.isSensor||i.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,s,a),u},e.update=function(s,a,p){var i=a.supports,u=a.supportCount,o=s.contacts,t=a.parentA,n=a.parentB;s.isActive=!0,s.timeUpdated=p,s.collision=a,s.separation=a.depth,s.inverseMass=t.inverseMass+n.inverseMass,s.friction=t.friction<n.friction?t.friction:n.friction,s.frictionStatic=t.frictionStatic>n.frictionStatic?t.frictionStatic:n.frictionStatic,s.restitution=t.restitution>n.restitution?t.restitution:n.restitution,s.slop=t.slop>n.slop?t.slop:n.slop,s.contactCount=u,a.pair=s;var r=i[0],l=o[0],g=i[1],h=o[1];h.vertex!==r&&l.vertex!==g||(o[1]=l,o[0]=l=h,h=o[1]),l.vertex=r,h.vertex=g},e.setActive=function(s,a,p){a?(s.isActive=!0,s.timeUpdated=p):(s.isActive=!1,s.contactCount=0)},e.id=function(s,a){return s.id<a.id?s.id.toString(36)+":"+a.id.toString(36):a.id.toString(36)+":"+s.id.toString(36)}},function(_,T,f){var e={};_.exports=e;var c=f(3),s=f(2),a=f(7),p=f(1),i=f(11),u=f(0);e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(o){var t=o;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,l=s.magnitude(s.sub(n,r));t.length=t.length!==void 0?t.length:l,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(g.type="pin",g.anchors=!1):t.stiffness<.9&&(g.type="spring"),t.render=u.extend(g,t.render),t},e.preSolveAll=function(o){for(var t=0;t<o.length;t+=1){var n=o[t],r=n.constraintImpulse;n.isStatic||r.x===0&&r.y===0&&r.angle===0||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},e.solveAll=function(o,t){for(var n=u.clamp(t/u._baseDelta,0,1),r=0;r<o.length;r+=1){var l=o[r],g=!l.bodyA||l.bodyA&&l.bodyA.isStatic,h=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(g||h)&&e.solve(o[r],n)}for(r=0;r<o.length;r+=1)g=!(l=o[r]).bodyA||l.bodyA&&l.bodyA.isStatic,h=!l.bodyB||l.bodyB&&l.bodyB.isStatic,g||h||e.solve(o[r],n)},e.solve=function(o,t){var n=o.bodyA,r=o.bodyB,l=o.pointA,g=o.pointB;if(n||r){n&&!n.isStatic&&(s.rotate(l,n.angle-o.angleA,l),o.angleA=n.angle),r&&!r.isStatic&&(s.rotate(g,r.angle-o.angleB,g),o.angleB=r.angle);var h=l,b=g;if(n&&(h=s.add(n.position,l)),r&&(b=s.add(r.position,g)),h&&b){var w=s.sub(h,b),d=s.magnitude(w);d<e._minLength&&(d=e._minLength);var y,x,v,m,S,P=(d-o.length)/d,A=o.stiffness>=1||o.length===0?o.stiffness*t:o.stiffness*t*t,B=o.damping*t,C=s.mult(w,P*A),M=(n?n.inverseMass:0)+(r?r.inverseMass:0),k=M+((n?n.inverseInertia:0)+(r?r.inverseInertia:0));if(B>0){var I=s.create();v=s.div(w,d),S=s.sub(r&&s.sub(r.position,r.positionPrev)||I,n&&s.sub(n.position,n.positionPrev)||I),m=s.dot(v,S)}n&&!n.isStatic&&(x=n.inverseMass/M,n.constraintImpulse.x-=C.x*x,n.constraintImpulse.y-=C.y*x,n.position.x-=C.x*x,n.position.y-=C.y*x,B>0&&(n.positionPrev.x-=B*v.x*m*x,n.positionPrev.y-=B*v.y*m*x),y=s.cross(l,C)/k*e._torqueDampen*n.inverseInertia*(1-o.angularStiffness),n.constraintImpulse.angle-=y,n.angle-=y),r&&!r.isStatic&&(x=r.inverseMass/M,r.constraintImpulse.x+=C.x*x,r.constraintImpulse.y+=C.y*x,r.position.x+=C.x*x,r.position.y+=C.y*x,B>0&&(r.positionPrev.x+=B*v.x*m*x,r.positionPrev.y+=B*v.y*m*x),y=s.cross(g,C)/k*e._torqueDampen*r.inverseInertia*(1-o.angularStiffness),r.constraintImpulse.angle+=y,r.angle+=y)}}},e.postSolveAll=function(o){for(var t=0;t<o.length;t++){var n=o[t],r=n.constraintImpulse;if(!(n.isStatic||r.x===0&&r.y===0&&r.angle===0)){a.set(n,!1);for(var l=0;l<n.parts.length;l++){var g=n.parts[l];c.translate(g.vertices,r),l>0&&(g.position.x+=r.x,g.position.y+=r.y),r.angle!==0&&(c.rotate(g.vertices,r.angle,n.position),i.rotate(g.axes,r.angle),l>0&&s.rotateAbout(g.position,r.angle,n.position,g.position)),p.update(g.bounds,g.vertices,n.velocity)}r.angle*=e._warming,r.x*=e._warming,r.y*=e._warming}}},e.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},e.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}},e.currentLength=function(o){var t=(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),n=(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0),r=t-((o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0)),l=n-((o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0));return Math.sqrt(r*r+l*l)}},function(_,T,f){var e={};_.exports=e;var c=f(2),s=f(0);e.fromVertices=function(a){for(var p={},i=0;i<a.length;i++){var u=(i+1)%a.length,o=c.normalise({x:a[u].y-a[i].y,y:a[i].x-a[u].x}),t=o.y===0?1/0:o.x/o.y;p[t=t.toFixed(3).toString()]=o}return s.values(p)},e.rotate=function(a,p){if(p!==0)for(var i=Math.cos(p),u=Math.sin(p),o=0;o<a.length;o++){var t,n=a[o];t=n.x*i-n.y*u,n.y=n.x*u+n.y*i,n.x=t}}},function(_,T,f){var e={};_.exports=e;var c=f(3),s=f(0),a=f(4),p=f(1),i=f(2);e.rectangle=function(u,o,t,n,r){r=r||{};var l={label:"Rectangle Body",position:{x:u,y:o},vertices:c.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(r.chamfer){var g=r.chamfer;l.vertices=c.chamfer(l.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete r.chamfer}return a.create(s.extend({},l,r))},e.trapezoid=function(u,o,t,n,r,l){l=l||{},r>=1&&s.warn("Bodies.trapezoid: slope parameter must be < 1.");var g,h=t*(r*=.5),b=h+(1-2*r)*t,w=b+h;g=r<.5?"L 0 0 L "+h+" "+-n+" L "+b+" "+-n+" L "+w+" 0":"L 0 0 L "+b+" "+-n+" L "+w+" 0";var d={label:"Trapezoid Body",position:{x:u,y:o},vertices:c.fromPath(g)};if(l.chamfer){var y=l.chamfer;d.vertices=c.chamfer(d.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return a.create(s.extend({},d,l))},e.circle=function(u,o,t,n,r){n=n||{};var l={label:"Circle Body",circleRadius:t};r=r||25;var g=Math.ceil(Math.max(10,Math.min(r,t)));return g%2==1&&(g+=1),e.polygon(u,o,g,t,s.extend({},l,n))},e.polygon=function(u,o,t,n,r){if(r=r||{},t<3)return e.circle(u,o,n,r);for(var l=2*Math.PI/t,g="",h=.5*l,b=0;b<t;b+=1){var w=h+b*l,d=Math.cos(w)*n,y=Math.sin(w)*n;g+="L "+d.toFixed(3)+" "+y.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:u,y:o},vertices:c.fromPath(g)};if(r.chamfer){var v=r.chamfer;x.vertices=c.chamfer(x.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete r.chamfer}return a.create(s.extend({},x,r))},e.fromVertices=function(u,o,t,n,r,l,g,h){var b,w,d,y,x,v,m,S,P,A,B=s.getDecomp();for(b=!!(B&&B.quickDecomp),n=n||{},d=[],r=r!==void 0&&r,l=l!==void 0?l:.01,g=g!==void 0?g:10,h=h!==void 0?h:.01,s.isArray(t[0])||(t=[t]),P=0;P<t.length;P+=1)if(x=t[P],!(y=c.isConvex(x))&&!b&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!b)x=y?c.clockwiseSort(x):c.hull(x),d.push({position:{x:u,y:o},vertices:x});else{var C=x.map((function(H){return[H.x,H.y]}));B.makeCCW(C),l!==!1&&B.removeCollinearPoints(C,l),h!==!1&&B.removeDuplicatePoints&&B.removeDuplicatePoints(C,h);var M=B.quickDecomp(C);for(v=0;v<M.length;v++){var k=M[v].map((function(H){return{x:H[0],y:H[1]}}));g>0&&c.area(k)<g||d.push({position:c.centre(k),vertices:k})}}for(v=0;v<d.length;v++)d[v]=a.create(s.extend(d[v],n));if(r)for(v=0;v<d.length;v++){var I=d[v];for(m=v+1;m<d.length;m++){var R=d[m];if(p.overlaps(I.bounds,R.bounds)){var D=I.vertices,E=R.vertices;for(S=0;S<I.vertices.length;S++)for(A=0;A<R.vertices.length;A++){var q=i.magnitudeSquared(i.sub(D[(S+1)%D.length],E[A])),F=i.magnitudeSquared(i.sub(D[S],E[(A+1)%E.length]));q<5&&F<5&&(D[S].isInternal=!0,E[A].isInternal=!0)}}}}return d.length>1?(w=a.create(s.extend({parts:d.slice(0)},n)),a.setPosition(w,{x:u,y:o}),w):d[0]}},function(_,T,f){var e={};_.exports=e;var c=f(0),s=f(8);e.create=function(a){return c.extend({bodies:[],collisions:[],pairs:null},a)},e.setBodies=function(a,p){a.bodies=p.slice(0)},e.clear=function(a){a.bodies=[],a.collisions=[]},e.collisions=function(a){var p,i,u=a.pairs,o=a.bodies,t=o.length,n=e.canCollide,r=s.collides,l=a.collisions,g=0;for(o.sort(e._compareBoundsX),p=0;p<t;p++){var h=o[p],b=h.bounds,w=h.bounds.max.x,d=h.bounds.max.y,y=h.bounds.min.y,x=h.isStatic||h.isSleeping,v=h.parts.length,m=v===1;for(i=p+1;i<t;i++){var S=o[i];if((R=S.bounds).min.x>w)break;if(!(d<R.min.y||y>R.max.y)&&(!x||!S.isStatic&&!S.isSleeping)&&n(h.collisionFilter,S.collisionFilter)){var P=S.parts.length;if(m&&P===1)(k=r(h,S,u))&&(l[g++]=k);else for(var A=P>1?1:0,B=v>1?1:0;B<v;B++)for(var C=h.parts[B],M=(b=C.bounds,A);M<P;M++){var k,I=S.parts[M],R=I.bounds;b.min.x>R.max.x||b.max.x<R.min.x||b.max.y<R.min.y||b.min.y>R.max.y||(k=r(C,I,u))&&(l[g++]=k)}}}}return l.length!==g&&(l.length=g),l},e.canCollide=function(a,p){return a.group===p.group&&a.group!==0?a.group>0:(a.mask&p.category)!=0&&(p.mask&a.category)!=0},e._compareBoundsX=function(a,p){return a.bounds.min.x-p.bounds.min.x}},function(_,T,f){var e={};_.exports=e;var c=f(0);e.create=function(s){var a={};return s||c.log("Mouse.create: element was undefined, defaulting to document.body","warn"),a.element=s||document.body,a.absolute={x:0,y:0},a.position={x:0,y:0},a.mousedownPosition={x:0,y:0},a.mouseupPosition={x:0,y:0},a.offset={x:0,y:0},a.scale={x:1,y:1},a.wheelDelta=0,a.button=-1,a.pixelRatio=parseInt(a.element.getAttribute("data-pixel-ratio"),10)||1,a.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},a.mousemove=function(p){var i=e._getRelativeMousePosition(p,a.element,a.pixelRatio);p.changedTouches&&(a.button=0,p.preventDefault()),a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousemove=p},a.mousedown=function(p){var i=e._getRelativeMousePosition(p,a.element,a.pixelRatio);p.changedTouches?(a.button=0,p.preventDefault()):a.button=p.button,a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mousedownPosition.x=a.position.x,a.mousedownPosition.y=a.position.y,a.sourceEvents.mousedown=p},a.mouseup=function(p){var i=e._getRelativeMousePosition(p,a.element,a.pixelRatio);p.changedTouches&&p.preventDefault(),a.button=-1,a.absolute.x=i.x,a.absolute.y=i.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mouseupPosition.x=a.position.x,a.mouseupPosition.y=a.position.y,a.sourceEvents.mouseup=p},a.mousewheel=function(p){a.wheelDelta=Math.max(-1,Math.min(1,p.wheelDelta||-p.detail)),p.preventDefault(),a.sourceEvents.mousewheel=p},e.setElement(a,a.element),a},e.setElement=function(s,a){s.element=a,a.addEventListener("mousemove",s.mousemove,{passive:!0}),a.addEventListener("mousedown",s.mousedown,{passive:!0}),a.addEventListener("mouseup",s.mouseup,{passive:!0}),a.addEventListener("wheel",s.mousewheel,{passive:!1}),a.addEventListener("touchmove",s.mousemove,{passive:!1}),a.addEventListener("touchstart",s.mousedown,{passive:!1}),a.addEventListener("touchend",s.mouseup,{passive:!1})},e.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},e.setOffset=function(s,a){s.offset.x=a.x,s.offset.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e.setScale=function(s,a){s.scale.x=a.x,s.scale.y=a.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e._getRelativeMousePosition=function(s,a,p){var i,u,o=a.getBoundingClientRect(),t=document.documentElement||document.body.parentNode||document.body,n=window.pageXOffset!==void 0?window.pageXOffset:t.scrollLeft,r=window.pageYOffset!==void 0?window.pageYOffset:t.scrollTop,l=s.changedTouches;return l?(i=l[0].pageX-o.left-n,u=l[0].pageY-o.top-r):(i=s.pageX-o.left-n,u=s.pageY-o.top-r),{x:i/(a.clientWidth/(a.width||a.clientWidth)*p),y:u/(a.clientHeight/(a.height||a.clientHeight)*p)}}},function(_,T,f){var e={};_.exports=e;var c=f(0);e._registry={},e.register=function(s){if(e.isPlugin(s)||c.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var a=e._registry[s.name],p=e.versionParse(s.version).number,i=e.versionParse(a.version).number;p>i?(c.warn("Plugin.register:",e.toString(a),"was upgraded to",e.toString(s)),e._registry[s.name]=s):p<i?c.warn("Plugin.register:",e.toString(a),"can not be downgraded to",e.toString(s)):s!==a&&c.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,a){return s.used.indexOf(a)>-1},e.isFor=function(s,a){var p=s.for&&e.dependencyParse(s.for);return!s.for||a.name===p.name&&e.versionSatisfies(a.version,p.range)},e.use=function(s,a){if(s.uses=(s.uses||[]).concat(a||[]),s.uses.length!==0){for(var p=e.dependencies(s),i=c.topologicalSort(p),u=[],o=0;o<i.length;o+=1)if(i[o]!==s.name){var t=e.resolve(i[o]);t?e.isUsed(s,t.name)||(e.isFor(t,s)||(c.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(s)+"."),t._warned=!0),t.install?t.install(s):(c.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("🔶 "+e.toString(t)),delete t._warned):u.push("✅ "+e.toString(t)),s.used.push(t.name)):u.push("❌ "+i[o])}u.length>0&&c.info(u.join("  "))}else c.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.")},e.dependencies=function(s,a){var p=e.dependencyParse(s),i=p.name;if(!(i in(a=a||{}))){s=e.resolve(s)||s,a[i]=c.map(s.uses||[],(function(o){e.isPlugin(o)&&e.register(o);var t=e.dependencyParse(o),n=e.resolve(o);return n&&!e.versionSatisfies(n.version,t.range)?(c.warn("Plugin.dependencies:",e.toString(n),"does not satisfy",e.toString(t),"used by",e.toString(p)+"."),n._warned=!0,s._warned=!0):n||(c.warn("Plugin.dependencies:",e.toString(o),"used by",e.toString(p),"could not be resolved."),s._warned=!0),t.name}));for(var u=0;u<a[i].length;u+=1)e.dependencies(a[i][u],a);return a}},e.dependencyParse=function(s){return c.isString(s)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(s)||c.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}):{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(s)||c.warn("Plugin.versionParse:",s,"is not a valid version or range.");var p=a.exec(s),i=Number(p[4]),u=Number(p[5]),o=Number(p[6]);return{isRange:!!(p[1]||p[2]),version:p[3],range:s,operator:p[1]||p[2]||"",major:i,minor:u,patch:o,parts:[i,u,o],prerelease:p[7],number:1e8*i+1e4*u+o}},e.versionSatisfies=function(s,a){a=a||"*";var p=e.versionParse(a),i=e.versionParse(s);if(p.isRange){if(p.operator==="*"||s==="*")return!0;if(p.operator===">")return i.number>p.number;if(p.operator===">=")return i.number>=p.number;if(p.operator==="~")return i.major===p.major&&i.minor===p.minor&&i.patch>=p.patch;if(p.operator==="^")return p.major>0?i.major===p.major&&i.number>=p.number:p.minor>0?i.minor===p.minor&&i.patch>=p.patch:i.patch===p.patch}return s===a||s==="*"}},function(_,T){var f={};_.exports=f,f.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},function(_,T,f){var e={};_.exports=e;var c=f(7),s=f(18),a=f(13),p=f(19),i=f(5),u=f(6),o=f(10),t=f(0),n=f(4);e._deltaMax=1e3/60,e.create=function(r){r=r||{};var l=t.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},r);return l.world=r.world||u.create({label:"World"}),l.pairs=r.pairs||p.create(),l.detector=r.detector||a.create(),l.detector.pairs=l.pairs,l.grid={buckets:[]},l.world.gravity=l.gravity,l.broadphase=l.grid,l.metrics={},l},e.update=function(r,l){var g,h=t.now(),b=r.world,w=r.detector,d=r.pairs,y=r.timing,x=y.timestamp;l>e._deltaMax&&t.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",e._deltaMax.toFixed(3),"ms."),l=l!==void 0?l:t._baseDelta,l*=y.timeScale,y.timestamp+=l,y.lastDelta=l;var v={timestamp:y.timestamp,delta:l};i.trigger(r,"beforeUpdate",v);var m=u.allBodies(b),S=u.allConstraints(b);for(b.isModified&&(a.setBodies(w,m),u.setModified(b,!1,!1,!0)),r.enableSleeping&&c.update(m,l),e._bodiesApplyGravity(m,r.gravity),l>0&&e._bodiesUpdate(m,l),i.trigger(r,"beforeSolve",v),o.preSolveAll(m),g=0;g<r.constraintIterations;g++)o.solveAll(S,l);o.postSolveAll(m);var P=a.collisions(w);p.update(d,P,x),r.enableSleeping&&c.afterCollisions(d.list),d.collisionStart.length>0&&i.trigger(r,"collisionStart",{pairs:d.collisionStart,timestamp:y.timestamp,delta:l});var A=t.clamp(20/r.positionIterations,0,1);for(s.preSolvePosition(d.list),g=0;g<r.positionIterations;g++)s.solvePosition(d.list,l,A);for(s.postSolvePosition(m),o.preSolveAll(m),g=0;g<r.constraintIterations;g++)o.solveAll(S,l);for(o.postSolveAll(m),s.preSolveVelocity(d.list),g=0;g<r.velocityIterations;g++)s.solveVelocity(d.list,l);return e._bodiesUpdateVelocities(m),d.collisionActive.length>0&&i.trigger(r,"collisionActive",{pairs:d.collisionActive,timestamp:y.timestamp,delta:l}),d.collisionEnd.length>0&&i.trigger(r,"collisionEnd",{pairs:d.collisionEnd,timestamp:y.timestamp,delta:l}),e._bodiesClearForces(m),i.trigger(r,"afterUpdate",v),r.timing.lastElapsed=t.now()-h,r},e.merge=function(r,l){if(t.extend(r,l),l.world){r.world=l.world,e.clear(r);for(var g=u.allBodies(r.world),h=0;h<g.length;h++){var b=g[h];c.set(b,!1),b.id=t.nextId()}}},e.clear=function(r){p.clear(r.pairs),a.clear(r.detector)},e._bodiesClearForces=function(r){for(var l=r.length,g=0;g<l;g++){var h=r[g];h.force.x=0,h.force.y=0,h.torque=0}},e._bodiesApplyGravity=function(r,l){var g=l.scale!==void 0?l.scale:.001,h=r.length;if((l.x!==0||l.y!==0)&&g!==0)for(var b=0;b<h;b++){var w=r[b];w.isStatic||w.isSleeping||(w.force.y+=w.mass*l.y*g,w.force.x+=w.mass*l.x*g)}},e._bodiesUpdate=function(r,l){for(var g=r.length,h=0;h<g;h++){var b=r[h];b.isStatic||b.isSleeping||n.update(b,l)}},e._bodiesUpdateVelocities=function(r){for(var l=r.length,g=0;g<l;g++)n.updateVelocities(r[g])}},function(_,T,f){var e={};_.exports=e;var c=f(3),s=f(0),a=f(1);e._restingThresh=2,e._restingThreshTangent=Math.sqrt(6),e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e._frictionMaxStatic=Number.MAX_VALUE,e.preSolvePosition=function(p){var i,u,o,t=p.length;for(i=0;i<t;i++)(u=p[i]).isActive&&(o=u.contactCount,u.collision.parentA.totalContacts+=o,u.collision.parentB.totalContacts+=o)},e.solvePosition=function(p,i,u){var o,t,n,r,l,g,h,b,w=e._positionDampen*(u||1),d=s.clamp(i/s._baseDelta,0,1),y=p.length;for(o=0;o<y;o++)(t=p[o]).isActive&&!t.isSensor&&(r=(n=t.collision).parentA,l=n.parentB,g=n.normal,t.separation=n.depth+g.x*(l.positionImpulse.x-r.positionImpulse.x)+g.y*(l.positionImpulse.y-r.positionImpulse.y));for(o=0;o<y;o++)(t=p[o]).isActive&&!t.isSensor&&(r=(n=t.collision).parentA,l=n.parentB,g=n.normal,b=t.separation-t.slop*d,(r.isStatic||l.isStatic)&&(b*=2),r.isStatic||r.isSleeping||(h=w/r.totalContacts,r.positionImpulse.x+=g.x*b*h,r.positionImpulse.y+=g.y*b*h),l.isStatic||l.isSleeping||(h=w/l.totalContacts,l.positionImpulse.x-=g.x*b*h,l.positionImpulse.y-=g.y*b*h))},e.postSolvePosition=function(p){for(var i=e._positionWarming,u=p.length,o=c.translate,t=a.update,n=0;n<u;n++){var r=p[n],l=r.positionImpulse,g=l.x,h=l.y,b=r.velocity;if(r.totalContacts=0,g!==0||h!==0){for(var w=0;w<r.parts.length;w++){var d=r.parts[w];o(d.vertices,l),t(d.bounds,d.vertices,b),d.position.x+=g,d.position.y+=h}r.positionPrev.x+=g,r.positionPrev.y+=h,g*b.x+h*b.y<0?(l.x=0,l.y=0):(l.x*=i,l.y*=i)}}},e.preSolveVelocity=function(p){var i,u,o=p.length;for(i=0;i<o;i++){var t=p[i];if(t.isActive&&!t.isSensor){var n=t.contacts,r=t.contactCount,l=t.collision,g=l.parentA,h=l.parentB,b=l.normal,w=l.tangent;for(u=0;u<r;u++){var d=n[u],y=d.vertex,x=d.normalImpulse,v=d.tangentImpulse;if(x!==0||v!==0){var m=b.x*x+w.x*v,S=b.y*x+w.y*v;g.isStatic||g.isSleeping||(g.positionPrev.x+=m*g.inverseMass,g.positionPrev.y+=S*g.inverseMass,g.anglePrev+=g.inverseInertia*((y.x-g.position.x)*S-(y.y-g.position.y)*m)),h.isStatic||h.isSleeping||(h.positionPrev.x-=m*h.inverseMass,h.positionPrev.y-=S*h.inverseMass,h.anglePrev-=h.inverseInertia*((y.x-h.position.x)*S-(y.y-h.position.y)*m))}}}}},e.solveVelocity=function(p,i){var u,o,t,n,r=i/s._baseDelta,l=r*r*r,g=-e._restingThresh*r,h=e._restingThreshTangent,b=e._frictionNormalMultiplier*r,w=e._frictionMaxStatic,d=p.length;for(t=0;t<d;t++){var y=p[t];if(y.isActive&&!y.isSensor){var x=y.collision,v=x.parentA,m=x.parentB,S=x.normal.x,P=x.normal.y,A=x.tangent.x,B=x.tangent.y,C=y.inverseMass,M=y.friction*y.frictionStatic*b,k=y.contacts,I=y.contactCount,R=1/I,D=v.position.x-v.positionPrev.x,E=v.position.y-v.positionPrev.y,q=v.angle-v.anglePrev,F=m.position.x-m.positionPrev.x,H=m.position.y-m.positionPrev.y,U=m.angle-m.anglePrev;for(n=0;n<I;n++){var L=k[n],O=L.vertex,V=O.x-v.position.x,X=O.y-v.position.y,Q=O.x-m.position.x,Y=O.y-m.position.y,J=D-X*q-(F-Y*U),K=E+V*q-(H+Q*U),$=S*J+P*K,j=A*J+B*K,ee=y.separation+$,te=Math.min(ee,1),ne=(te=ee<0?0:te)*M;j<-ne||j>ne?(o=j>0?j:-j,(u=y.friction*(j>0?1:-1)*l)<-o?u=-o:u>o&&(u=o)):(u=j,o=w);var ie=V*P-X*S,oe=Q*P-Y*S,re=R/(C+v.inverseInertia*ie*ie+m.inverseInertia*oe*oe),W=(1+y.restitution)*$*re;if(u*=re,$<g)L.normalImpulse=0;else{var ae=L.normalImpulse;L.normalImpulse+=W,L.normalImpulse>0&&(L.normalImpulse=0),W=L.normalImpulse-ae}if(j<-h||j>h)L.tangentImpulse=0;else{var se=L.tangentImpulse;L.tangentImpulse+=u,L.tangentImpulse<-o&&(L.tangentImpulse=-o),L.tangentImpulse>o&&(L.tangentImpulse=o),u=L.tangentImpulse-se}var N=S*W+A*u,G=P*W+B*u;v.isStatic||v.isSleeping||(v.positionPrev.x+=N*v.inverseMass,v.positionPrev.y+=G*v.inverseMass,v.anglePrev+=(V*G-X*N)*v.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=N*m.inverseMass,m.positionPrev.y-=G*m.inverseMass,m.anglePrev-=(Q*G-Y*N)*m.inverseInertia)}}}}},function(_,T,f){var e={};_.exports=e;var c=f(9),s=f(0);e.create=function(a){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},e.update=function(a,p,i){var u,o,t,n=c.update,r=c.create,l=c.setActive,g=a.table,h=a.list,b=h.length,w=b,d=a.collisionStart,y=a.collisionEnd,x=a.collisionActive,v=p.length,m=0,S=0,P=0;for(t=0;t<v;t++)(o=(u=p[t]).pair)?(o.isActive&&(x[P++]=o),n(o,u,i)):(g[(o=r(u,i)).id]=o,d[m++]=o,h[w++]=o);for(w=0,b=h.length,t=0;t<b;t++)(o=h[t]).timeUpdated>=i?h[w++]=o:(l(o,!1,i),o.collision.bodyA.sleepCounter>0&&o.collision.bodyB.sleepCounter>0?h[w++]=o:(y[S++]=o,delete g[o.id]));h.length!==w&&(h.length=w),d.length!==m&&(d.length=m),y.length!==S&&(y.length=S),x.length!==P&&(x.length=P)},e.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}},function(_,T,f){var e=_.exports=f(21);e.Axes=f(11),e.Bodies=f(12),e.Body=f(4),e.Bounds=f(1),e.Collision=f(8),e.Common=f(0),e.Composite=f(6),e.Composites=f(22),e.Constraint=f(10),e.Contact=f(16),e.Detector=f(13),e.Engine=f(17),e.Events=f(5),e.Grid=f(23),e.Mouse=f(14),e.MouseConstraint=f(24),e.Pair=f(9),e.Pairs=f(19),e.Plugin=f(15),e.Query=f(25),e.Render=f(26),e.Resolver=f(18),e.Runner=f(27),e.SAT=f(28),e.Sleeping=f(7),e.Svg=f(29),e.Vector=f(2),e.Vertices=f(3),e.World=f(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(_,T,f){var e={};_.exports=e;var c=f(15),s=f(0);e.name="matter-js",e.version="0.20.0",e.uses=[],e.used=[],e.use=function(){c.use(e,Array.prototype.slice.call(arguments))},e.before=function(a,p){return a=a.replace(/^Matter./,""),s.chainPathBefore(e,a,p)},e.after=function(a,p){return a=a.replace(/^Matter./,""),s.chainPathAfter(e,a,p)}},function(_,T,f){var e={};_.exports=e;var c=f(6),s=f(10),a=f(0),p=f(4),i=f(12),u=a.deprecated;e.stack=function(o,t,n,r,l,g,h){for(var b,w=c.create({label:"Stack"}),d=o,y=t,x=0,v=0;v<r;v++){for(var m=0,S=0;S<n;S++){var P=h(d,y,S,v,b,x);if(P){var A=P.bounds.max.y-P.bounds.min.y,B=P.bounds.max.x-P.bounds.min.x;A>m&&(m=A),p.translate(P,{x:.5*B,y:.5*A}),d=P.bounds.max.x+l,c.addBody(w,P),b=P,x+=1}else d+=l}y+=m+g,d=o}return w},e.chain=function(o,t,n,r,l,g){for(var h=o.bodies,b=1;b<h.length;b++){var w=h[b-1],d=h[b],y=w.bounds.max.y-w.bounds.min.y,x=w.bounds.max.x-w.bounds.min.x,v=d.bounds.max.y-d.bounds.min.y,m={bodyA:w,pointA:{x:x*t,y:y*n},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*r,y:v*l}},S=a.extend(m,g);c.addConstraint(o,s.create(S))}return o.label+=" Chain",o},e.mesh=function(o,t,n,r,l){var g,h,b,w,d,y=o.bodies;for(g=0;g<n;g++){for(h=1;h<t;h++)b=y[h-1+g*t],w=y[h+g*t],c.addConstraint(o,s.create(a.extend({bodyA:b,bodyB:w},l)));if(g>0)for(h=0;h<t;h++)b=y[h+(g-1)*t],w=y[h+g*t],c.addConstraint(o,s.create(a.extend({bodyA:b,bodyB:w},l))),r&&h>0&&(d=y[h-1+(g-1)*t],c.addConstraint(o,s.create(a.extend({bodyA:d,bodyB:w},l)))),r&&h<t-1&&(d=y[h+1+(g-1)*t],c.addConstraint(o,s.create(a.extend({bodyA:d,bodyB:w},l))))}return o.label+=" Mesh",o},e.pyramid=function(o,t,n,r,l,g,h){return e.stack(o,t,n,r,l,g,(function(b,w,d,y,x,v){var m=Math.min(r,Math.ceil(n/2)),S=x?x.bounds.max.x-x.bounds.min.x:0;if(!(y>m||d<(y=m-y)||d>n-1-y))return v===1&&p.translate(x,{x:(d+(n%2==1?1:-1))*S,y:0}),h(o+(x?d*S:0)+d*l,w,d,y,x,v)}))},e.newtonsCradle=function(o,t,n,r,l){for(var g=c.create({label:"Newtons Cradle"}),h=0;h<n;h++){var b=i.circle(o+h*(1.9*r),t+l,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),w=s.create({pointA:{x:o+h*(1.9*r),y:t},bodyB:b});c.addBody(g,b),c.addConstraint(g,w)}return g},u(e,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),e.car=function(o,t,n,r,l){var g=p.nextGroup(!0),h=.5*-n+20,b=.5*n-20,w=c.create({label:"Car"}),d=i.rectangle(o,t,n,r,{collisionFilter:{group:g},chamfer:{radius:.5*r},density:2e-4}),y=i.circle(o+h,t+0,l,{collisionFilter:{group:g},friction:.8}),x=i.circle(o+b,t+0,l,{collisionFilter:{group:g},friction:.8}),v=s.create({bodyB:d,pointB:{x:h,y:0},bodyA:y,stiffness:1,length:0}),m=s.create({bodyB:d,pointB:{x:b,y:0},bodyA:x,stiffness:1,length:0});return c.addBody(w,d),c.addBody(w,y),c.addBody(w,x),c.addConstraint(w,v),c.addConstraint(w,m),w},u(e,"car","Composites.car ➤ moved to car example"),e.softBody=function(o,t,n,r,l,g,h,b,w,d){w=a.extend({inertia:1/0},w),d=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var y=e.stack(o,t,n,r,l,g,(function(x,v){return i.circle(x,v,b,w)}));return e.mesh(y,n,r,h,d),y.label="Soft Body",y},u(e,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(_,T,f){var e={};_.exports=e;var c=f(9),s=f(0),a=s.deprecated;e.create=function(p){return s.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},p)},e.update=function(p,i,u,o){var t,n,r,l,g,h=u.world,b=p.buckets,w=!1;for(t=0;t<i.length;t++){var d=i[t];if((!d.isSleeping||o)&&(!h.bounds||!(d.bounds.max.x<h.bounds.min.x||d.bounds.min.x>h.bounds.max.x||d.bounds.max.y<h.bounds.min.y||d.bounds.min.y>h.bounds.max.y))){var y=e._getRegion(p,d);if(!d.region||y.id!==d.region.id||o){d.region&&!o||(d.region=y);var x=e._regionUnion(y,d.region);for(n=x.startCol;n<=x.endCol;n++)for(r=x.startRow;r<=x.endRow;r++){l=b[g=e._getBucketId(n,r)];var v=n>=y.startCol&&n<=y.endCol&&r>=y.startRow&&r<=y.endRow,m=n>=d.region.startCol&&n<=d.region.endCol&&r>=d.region.startRow&&r<=d.region.endRow;!v&&m&&m&&l&&e._bucketRemoveBody(p,l,d),(d.region===y||v&&!m||o)&&(l||(l=e._createBucket(b,g)),e._bucketAddBody(p,l,d))}d.region=y,w=!0}}}w&&(p.pairsList=e._createActivePairsList(p))},a(e,"update","Grid.update ➤ replaced by Matter.Detector"),e.clear=function(p){p.buckets={},p.pairs={},p.pairsList=[]},a(e,"clear","Grid.clear ➤ replaced by Matter.Detector"),e._regionUnion=function(p,i){var u=Math.min(p.startCol,i.startCol),o=Math.max(p.endCol,i.endCol),t=Math.min(p.startRow,i.startRow),n=Math.max(p.endRow,i.endRow);return e._createRegion(u,o,t,n)},e._getRegion=function(p,i){var u=i.bounds,o=Math.floor(u.min.x/p.bucketWidth),t=Math.floor(u.max.x/p.bucketWidth),n=Math.floor(u.min.y/p.bucketHeight),r=Math.floor(u.max.y/p.bucketHeight);return e._createRegion(o,t,n,r)},e._createRegion=function(p,i,u,o){return{id:p+","+i+","+u+","+o,startCol:p,endCol:i,startRow:u,endRow:o}},e._getBucketId=function(p,i){return"C"+p+"R"+i},e._createBucket=function(p,i){return p[i]=[]},e._bucketAddBody=function(p,i,u){var o,t=p.pairs,n=c.id,r=i.length;for(o=0;o<r;o++){var l=i[o];if(!(u.id===l.id||u.isStatic&&l.isStatic)){var g=n(u,l),h=t[g];h?h[2]+=1:t[g]=[u,l,1]}}i.push(u)},e._bucketRemoveBody=function(p,i,u){var o,t=p.pairs,n=c.id;i.splice(s.indexOf(i,u),1);var r=i.length;for(o=0;o<r;o++){var l=t[n(u,i[o])];l&&(l[2]-=1)}},e._createActivePairsList=function(p){var i,u,o=p.pairs,t=s.keys(o),n=t.length,r=[];for(u=0;u<n;u++)(i=o[t[u]])[2]>0?r.push(i):delete o[t[u]];return r}},function(_,T,f){var e={};_.exports=e;var c=f(3),s=f(7),a=f(14),p=f(5),i=f(13),u=f(10),o=f(6),t=f(0),n=f(1);e.create=function(r,l){var g=(r?r.mouse:null)||(l?l.mouse:null);g||(r&&r.render&&r.render.canvas?g=a.create(r.render.canvas):l&&l.element?g=a.create(l.element):(g=a.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var h={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:u.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},b=t.extend(h,l);return p.on(r,"beforeUpdate",(function(){var w=o.allBodies(r.world);e.update(b,w),e._triggerEvents(b)})),b},e.update=function(r,l){var g=r.mouse,h=r.constraint,b=r.body;if(g.button===0){if(h.bodyB)s.set(h.bodyB,!1),h.pointA=g.position;else for(var w=0;w<l.length;w++)if(b=l[w],n.contains(b.bounds,g.position)&&i.canCollide(b.collisionFilter,r.collisionFilter))for(var d=b.parts.length>1?1:0;d<b.parts.length;d++){var y=b.parts[d];if(c.contains(y.vertices,g.position)){h.pointA=g.position,h.bodyB=r.body=b,h.pointB={x:g.position.x-b.position.x,y:g.position.y-b.position.y},h.angleB=b.angle,s.set(b,!1),p.trigger(r,"startdrag",{mouse:g,body:b});break}}}else h.bodyB=r.body=null,h.pointB=null,b&&p.trigger(r,"enddrag",{mouse:g,body:b})},e._triggerEvents=function(r){var l=r.mouse,g=l.sourceEvents;g.mousemove&&p.trigger(r,"mousemove",{mouse:l}),g.mousedown&&p.trigger(r,"mousedown",{mouse:l}),g.mouseup&&p.trigger(r,"mouseup",{mouse:l}),a.clearSourceEvents(l)}},function(_,T,f){var e={};_.exports=e;var c=f(2),s=f(8),a=f(1),p=f(12),i=f(3);e.collides=function(u,o){for(var t=[],n=o.length,r=u.bounds,l=s.collides,g=a.overlaps,h=0;h<n;h++){var b=o[h],w=b.parts.length,d=w===1?0:1;if(g(b.bounds,r))for(var y=d;y<w;y++){var x=b.parts[y];if(g(x.bounds,r)){var v=l(x,u);if(v){t.push(v);break}}}}return t},e.ray=function(u,o,t,n){n=n||1e-100;for(var r=c.angle(o,t),l=c.magnitude(c.sub(o,t)),g=.5*(t.x+o.x),h=.5*(t.y+o.y),b=p.rectangle(g,h,l,n,{angle:r}),w=e.collides(b,u),d=0;d<w.length;d+=1){var y=w[d];y.body=y.bodyB=y.bodyA}return w},e.region=function(u,o,t){for(var n=[],r=0;r<u.length;r++){var l=u[r],g=a.overlaps(l.bounds,o);(g&&!t||!g&&t)&&n.push(l)}return n},e.point=function(u,o){for(var t=[],n=0;n<u.length;n++){var r=u[n];if(a.contains(r.bounds,o))for(var l=r.parts.length===1?0:1;l<r.parts.length;l++){var g=r.parts[l];if(a.contains(g.bounds,o)&&i.contains(g.vertices,o)){t.push(r);break}}}return t}},function(_,T,f){var e={};_.exports=e;var c=f(4),s=f(0),a=f(6),p=f(1),i=f(5),u=f(2),o=f(14);(function(){var t,n;typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(d){window.setTimeout((function(){d(s.now())}),1e3/60)},n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(d){var y={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!d.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=s.extend(y,d);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=d.mouse,x.engine=d.engine,x.canvas=x.canvas||g(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.controller=e,x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),s.isElement(x.element)&&x.element.appendChild(x.canvas),x},e.run=function(d){(function y(x){d.frameRequestId=t(y),r(d,x),e.world(d,x),d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0),(d.options.showStats||d.options.showDebug)&&e.stats(d,d.context,x),(d.options.showPerformance||d.options.showDebug)&&e.performance(d,d.context,x),d.context.setTransform(1,0,0,1,0,0)})()},e.stop=function(d){n(d.frameRequestId)},e.setPixelRatio=function(d,y){var x=d.options,v=d.canvas;y==="auto"&&(y=h(v)),x.pixelRatio=y,v.setAttribute("data-pixel-ratio",y),v.width=x.width*y,v.height=x.height*y,v.style.width=x.width+"px",v.style.height=x.height+"px"},e.setSize=function(d,y,x){d.options.width=y,d.options.height=x,d.bounds.max.x=d.bounds.min.x+y,d.bounds.max.y=d.bounds.min.y+x,d.options.pixelRatio!==1?e.setPixelRatio(d,d.options.pixelRatio):(d.canvas.width=y,d.canvas.height=x)},e.lookAt=function(d,y,x,v){v=v===void 0||v,y=s.isArray(y)?y:[y],x=x||{x:0,y:0};for(var m={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},S=0;S<y.length;S+=1){var P=y[S],A=P.bounds?P.bounds.min:P.min||P.position||P,B=P.bounds?P.bounds.max:P.max||P.position||P;A&&B&&(A.x<m.min.x&&(m.min.x=A.x),B.x>m.max.x&&(m.max.x=B.x),A.y<m.min.y&&(m.min.y=A.y),B.y>m.max.y&&(m.max.y=B.y))}var C=m.max.x-m.min.x+2*x.x,M=m.max.y-m.min.y+2*x.y,k=d.canvas.height,I=d.canvas.width/k,R=C/M,D=1,E=1;R>I?E=R/I:D=I/R,d.options.hasBounds=!0,d.bounds.min.x=m.min.x,d.bounds.max.x=m.min.x+C*D,d.bounds.min.y=m.min.y,d.bounds.max.y=m.min.y+M*E,v&&(d.bounds.min.x+=.5*C-C*D*.5,d.bounds.max.x+=.5*C-C*D*.5,d.bounds.min.y+=.5*M-M*E*.5,d.bounds.max.y+=.5*M-M*E*.5),d.bounds.min.x-=x.x,d.bounds.max.x-=x.x,d.bounds.min.y-=x.y,d.bounds.max.y-=x.y,d.mouse&&(o.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.canvas.width,y:(d.bounds.max.y-d.bounds.min.y)/d.canvas.height}),o.setOffset(d.mouse,d.bounds.min))},e.startViewTransform=function(d){var y=d.bounds.max.x-d.bounds.min.x,x=d.bounds.max.y-d.bounds.min.y,v=y/d.options.width,m=x/d.options.height;d.context.setTransform(d.options.pixelRatio/v,0,0,d.options.pixelRatio/m,0,0),d.context.translate(-d.bounds.min.x,-d.bounds.min.y)},e.endViewTransform=function(d){d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0)},e.world=function(d,y){var x,v=s.now(),m=d.engine,S=m.world,P=d.canvas,A=d.context,B=d.options,C=d.timing,M=a.allBodies(S),k=a.allConstraints(S),I=B.wireframes?B.wireframeBackground:B.background,R=[],D=[],E={timestamp:m.timing.timestamp};if(i.trigger(d,"beforeRender",E),d.currentBackground!==I&&w(d,I),A.globalCompositeOperation="source-in",A.fillStyle="transparent",A.fillRect(0,0,P.width,P.height),A.globalCompositeOperation="source-over",B.hasBounds){for(x=0;x<M.length;x++){var q=M[x];p.overlaps(q.bounds,d.bounds)&&R.push(q)}for(x=0;x<k.length;x++){var F=k[x],H=F.bodyA,U=F.bodyB,L=F.pointA,O=F.pointB;H&&(L=u.add(H.position,F.pointA)),U&&(O=u.add(U.position,F.pointB)),L&&O&&(p.contains(d.bounds,L)||p.contains(d.bounds,O))&&D.push(F)}e.startViewTransform(d),d.mouse&&(o.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.options.width,y:(d.bounds.max.y-d.bounds.min.y)/d.options.height}),o.setOffset(d.mouse,d.bounds.min))}else D=k,R=M,d.options.pixelRatio!==1&&d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0);!B.wireframes||m.enableSleeping&&B.showSleeping?e.bodies(d,R,A):(B.showConvexHulls&&e.bodyConvexHulls(d,R,A),e.bodyWireframes(d,R,A)),B.showBounds&&e.bodyBounds(d,R,A),(B.showAxes||B.showAngleIndicator)&&e.bodyAxes(d,R,A),B.showPositions&&e.bodyPositions(d,R,A),B.showVelocity&&e.bodyVelocity(d,R,A),B.showIds&&e.bodyIds(d,R,A),B.showSeparations&&e.separations(d,m.pairs.list,A),B.showCollisions&&e.collisions(d,m.pairs.list,A),B.showVertexNumbers&&e.vertexNumbers(d,R,A),B.showMousePosition&&e.mousePosition(d,d.mouse,A),e.constraints(D,A),B.hasBounds&&e.endViewTransform(d),i.trigger(d,"afterRender",E),C.lastElapsed=s.now()-v},e.stats=function(d,y,x){for(var v=d.engine,m=v.world,S=a.allBodies(m),P=0,A=0,B=0;B<S.length;B+=1)P+=S[B].parts.length;var C={Part:P,Body:S.length,Cons:a.allConstraints(m).length,Comp:a.allComposites(m).length,Pair:v.pairs.list.length};for(var M in y.fillStyle="#0e0f19",y.fillRect(A,0,302.5,44),y.font="12px Arial",y.textBaseline="top",y.textAlign="right",C){var k=C[M];y.fillStyle="#aaa",y.fillText(M,A+55,8),y.fillStyle="#eee",y.fillText(k,A+55,26),A+=55}},e.performance=function(d,y){var x=d.engine,v=d.timing,m=v.deltaHistory,S=v.elapsedHistory,P=v.timestampElapsedHistory,A=v.engineDeltaHistory,B=v.engineUpdatesHistory,C=v.engineElapsedHistory,M=x.timing.lastUpdatesPerFrame,k=x.timing.lastDelta,I=l(m),R=l(S),D=l(A),E=l(B),q=l(C),F=l(P)/I||0,H=Math.round(I/k),U=1e3/I||0,L=10,O=69;y.fillStyle="#0e0f19",y.fillRect(0,50,442,34),e.status(y,L,O,60,4,m.length,Math.round(U)+" fps",U/e._goodFps,(function(V){return m[V]/I-1})),e.status(y,82,O,60,4,A.length,k.toFixed(2)+" dt",e._goodDelta/k,(function(V){return A[V]/D-1})),e.status(y,154,O,60,4,B.length,M+" upf",Math.pow(s.clamp(E/H||1,0,1),4),(function(V){return B[V]/E-1})),e.status(y,226,O,60,4,C.length,q.toFixed(2)+" ut",1-M*q/e._goodFps,(function(V){return C[V]/q-1})),e.status(y,298,O,60,4,S.length,R.toFixed(2)+" rt",1-R/e._goodFps,(function(V){return S[V]/R-1})),e.status(y,370,O,60,4,P.length,F.toFixed(2)+" x",F*F*F,(function(V){return(P[V]/m[V]/F||0)-1}))},e.status=function(d,y,x,v,m,S,P,A,B){d.strokeStyle="#888",d.fillStyle="#444",d.lineWidth=1,d.fillRect(y,x+7,v,1),d.beginPath(),d.moveTo(y,x+7-m*s.clamp(.4*B(0),-2,2));for(var C=0;C<v;C+=1)d.lineTo(y+C,x+7-(C<S?m*s.clamp(.4*B(C),-2,2):0));d.stroke(),d.fillStyle="hsl("+s.clamp(25+95*A,0,120)+",100%,60%)",d.fillRect(y,x-7,4,4),d.font="12px Arial",d.textBaseline="middle",d.textAlign="right",d.fillStyle="#eee",d.fillText(P,y+v,x-5)},e.constraints=function(d,y){for(var x=y,v=0;v<d.length;v++){var m=d[v];if(m.render.visible&&m.pointA&&m.pointB){var S,P,A=m.bodyA,B=m.bodyB;if(S=A?u.add(A.position,m.pointA):m.pointA,m.render.type==="pin")x.beginPath(),x.arc(S.x,S.y,3,0,2*Math.PI),x.closePath();else{if(P=B?u.add(B.position,m.pointB):m.pointB,x.beginPath(),x.moveTo(S.x,S.y),m.render.type==="spring")for(var C,M=u.sub(P,S),k=u.perp(u.normalise(M)),I=Math.ceil(s.clamp(m.length/5,12,20)),R=1;R<I;R+=1)C=R%2==0?1:-1,x.lineTo(S.x+M.x*(R/I)+k.x*C*4,S.y+M.y*(R/I)+k.y*C*4);x.lineTo(P.x,P.y)}m.render.lineWidth&&(x.lineWidth=m.render.lineWidth,x.strokeStyle=m.render.strokeStyle,x.stroke()),m.render.anchors&&(x.fillStyle=m.render.strokeStyle,x.beginPath(),x.arc(S.x,S.y,3,0,2*Math.PI),x.arc(P.x,P.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(d,y,x){var v,m,S,P,A=x,B=(d.engine,d.options),C=B.showInternalEdges||!B.wireframes;for(S=0;S<y.length;S++)if((v=y[S]).render.visible){for(P=v.parts.length>1?1:0;P<v.parts.length;P++)if((m=v.parts[P]).render.visible){if(B.showSleeping&&v.isSleeping?A.globalAlpha=.5*m.render.opacity:m.render.opacity!==1&&(A.globalAlpha=m.render.opacity),m.render.sprite&&m.render.sprite.texture&&!B.wireframes){var M=m.render.sprite,k=b(d,M.texture);A.translate(m.position.x,m.position.y),A.rotate(m.angle),A.drawImage(k,k.width*-M.xOffset*M.xScale,k.height*-M.yOffset*M.yScale,k.width*M.xScale,k.height*M.yScale),A.rotate(-m.angle),A.translate(-m.position.x,-m.position.y)}else{if(m.circleRadius)A.beginPath(),A.arc(m.position.x,m.position.y,m.circleRadius,0,2*Math.PI);else{A.beginPath(),A.moveTo(m.vertices[0].x,m.vertices[0].y);for(var I=1;I<m.vertices.length;I++)!m.vertices[I-1].isInternal||C?A.lineTo(m.vertices[I].x,m.vertices[I].y):A.moveTo(m.vertices[I].x,m.vertices[I].y),m.vertices[I].isInternal&&!C&&A.moveTo(m.vertices[(I+1)%m.vertices.length].x,m.vertices[(I+1)%m.vertices.length].y);A.lineTo(m.vertices[0].x,m.vertices[0].y),A.closePath()}B.wireframes?(A.lineWidth=1,A.strokeStyle=d.options.wireframeStrokeStyle,A.stroke()):(A.fillStyle=m.render.fillStyle,m.render.lineWidth&&(A.lineWidth=m.render.lineWidth,A.strokeStyle=m.render.strokeStyle,A.stroke()),A.fill())}A.globalAlpha=1}}},e.bodyWireframes=function(d,y,x){var v,m,S,P,A,B=x,C=d.options.showInternalEdges;for(B.beginPath(),S=0;S<y.length;S++)if((v=y[S]).render.visible)for(A=v.parts.length>1?1:0;A<v.parts.length;A++){for(m=v.parts[A],B.moveTo(m.vertices[0].x,m.vertices[0].y),P=1;P<m.vertices.length;P++)!m.vertices[P-1].isInternal||C?B.lineTo(m.vertices[P].x,m.vertices[P].y):B.moveTo(m.vertices[P].x,m.vertices[P].y),m.vertices[P].isInternal&&!C&&B.moveTo(m.vertices[(P+1)%m.vertices.length].x,m.vertices[(P+1)%m.vertices.length].y);B.lineTo(m.vertices[0].x,m.vertices[0].y)}B.lineWidth=1,B.strokeStyle=d.options.wireframeStrokeStyle,B.stroke()},e.bodyConvexHulls=function(d,y,x){var v,m,S,P=x;for(P.beginPath(),m=0;m<y.length;m++)if((v=y[m]).render.visible&&v.parts.length!==1){for(P.moveTo(v.vertices[0].x,v.vertices[0].y),S=1;S<v.vertices.length;S++)P.lineTo(v.vertices[S].x,v.vertices[S].y);P.lineTo(v.vertices[0].x,v.vertices[0].y)}P.lineWidth=1,P.strokeStyle="rgba(255,255,255,0.2)",P.stroke()},e.vertexNumbers=function(d,y,x){var v,m,S,P=x;for(v=0;v<y.length;v++){var A=y[v].parts;for(S=A.length>1?1:0;S<A.length;S++){var B=A[S];for(m=0;m<B.vertices.length;m++)P.fillStyle="rgba(255,255,255,0.2)",P.fillText(v+"_"+m,B.position.x+.8*(B.vertices[m].x-B.position.x),B.position.y+.8*(B.vertices[m].y-B.position.y))}}},e.mousePosition=function(d,y,x){var v=x;v.fillStyle="rgba(255,255,255,0.8)",v.fillText(y.position.x+"  "+y.position.y,y.position.x+5,y.position.y-5)},e.bodyBounds=function(d,y,x){var v=x,m=(d.engine,d.options);v.beginPath();for(var S=0;S<y.length;S++)if(y[S].render.visible)for(var P=y[S].parts,A=P.length>1?1:0;A<P.length;A++){var B=P[A];v.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}m.wireframes?v.strokeStyle="rgba(255,255,255,0.08)":v.strokeStyle="rgba(0,0,0,0.1)",v.lineWidth=1,v.stroke()},e.bodyAxes=function(d,y,x){var v,m,S,P,A=x,B=(d.engine,d.options);for(A.beginPath(),m=0;m<y.length;m++){var C=y[m],M=C.parts;if(C.render.visible)if(B.showAxes)for(S=M.length>1?1:0;S<M.length;S++)for(v=M[S],P=0;P<v.axes.length;P++){var k=v.axes[P];A.moveTo(v.position.x,v.position.y),A.lineTo(v.position.x+20*k.x,v.position.y+20*k.y)}else for(S=M.length>1?1:0;S<M.length;S++)for(v=M[S],P=0;P<v.axes.length;P++)A.moveTo(v.position.x,v.position.y),A.lineTo((v.vertices[0].x+v.vertices[v.vertices.length-1].x)/2,(v.vertices[0].y+v.vertices[v.vertices.length-1].y)/2)}B.wireframes?(A.strokeStyle="indianred",A.lineWidth=1):(A.strokeStyle="rgba(255, 255, 255, 0.4)",A.globalCompositeOperation="overlay",A.lineWidth=2),A.stroke(),A.globalCompositeOperation="source-over"},e.bodyPositions=function(d,y,x){var v,m,S,P,A=x,B=(d.engine,d.options);for(A.beginPath(),S=0;S<y.length;S++)if((v=y[S]).render.visible)for(P=0;P<v.parts.length;P++)m=v.parts[P],A.arc(m.position.x,m.position.y,3,0,2*Math.PI,!1),A.closePath();for(B.wireframes?A.fillStyle="indianred":A.fillStyle="rgba(0,0,0,0.5)",A.fill(),A.beginPath(),S=0;S<y.length;S++)(v=y[S]).render.visible&&(A.arc(v.positionPrev.x,v.positionPrev.y,2,0,2*Math.PI,!1),A.closePath());A.fillStyle="rgba(255,165,0,0.8)",A.fill()},e.bodyVelocity=function(d,y,x){var v=x;v.beginPath();for(var m=0;m<y.length;m++){var S=y[m];if(S.render.visible){var P=c.getVelocity(S);v.moveTo(S.position.x,S.position.y),v.lineTo(S.position.x+P.x,S.position.y+P.y)}}v.lineWidth=3,v.strokeStyle="cornflowerblue",v.stroke()},e.bodyIds=function(d,y,x){var v,m,S=x;for(v=0;v<y.length;v++)if(y[v].render.visible){var P=y[v].parts;for(m=P.length>1?1:0;m<P.length;m++){var A=P[m];S.font="12px Arial",S.fillStyle="rgba(255,255,255,0.5)",S.fillText(A.id,A.position.x+10,A.position.y-10)}}},e.collisions=function(d,y,x){var v,m,S,P,A=x,B=d.options;for(A.beginPath(),S=0;S<y.length;S++)if((v=y[S]).isActive)for(m=v.collision,P=0;P<v.contactCount;P++){var C=v.contacts[P].vertex;A.rect(C.x-1.5,C.y-1.5,3.5,3.5)}for(B.wireframes?A.fillStyle="rgba(255,255,255,0.7)":A.fillStyle="orange",A.fill(),A.beginPath(),S=0;S<y.length;S++)if((v=y[S]).isActive&&(m=v.collision,v.contactCount>0)){var M=v.contacts[0].vertex.x,k=v.contacts[0].vertex.y;v.contactCount===2&&(M=(v.contacts[0].vertex.x+v.contacts[1].vertex.x)/2,k=(v.contacts[0].vertex.y+v.contacts[1].vertex.y)/2),m.bodyB===m.supports[0].body||m.bodyA.isStatic===!0?A.moveTo(M-8*m.normal.x,k-8*m.normal.y):A.moveTo(M+8*m.normal.x,k+8*m.normal.y),A.lineTo(M,k)}B.wireframes?A.strokeStyle="rgba(255,165,0,0.7)":A.strokeStyle="orange",A.lineWidth=1,A.stroke()},e.separations=function(d,y,x){var v,m,S,P,A,B=x,C=d.options;for(B.beginPath(),A=0;A<y.length;A++)if((v=y[A]).isActive){S=(m=v.collision).bodyA;var M=1;(P=m.bodyB).isStatic||S.isStatic||(M=.5),P.isStatic&&(M=0),B.moveTo(P.position.x,P.position.y),B.lineTo(P.position.x-m.penetration.x*M,P.position.y-m.penetration.y*M),M=1,P.isStatic||S.isStatic||(M=.5),S.isStatic&&(M=0),B.moveTo(S.position.x,S.position.y),B.lineTo(S.position.x+m.penetration.x*M,S.position.y+m.penetration.y*M)}C.wireframes?B.strokeStyle="rgba(255,165,0,0.5)":B.strokeStyle="orange",B.stroke()},e.inspector=function(d,y){d.engine;var x,v=d.selected,m=d.render,S=m.options;if(S.hasBounds){var P=m.bounds.max.x-m.bounds.min.x,A=m.bounds.max.y-m.bounds.min.y,B=P/m.options.width,C=A/m.options.height;y.scale(1/B,1/C),y.translate(-m.bounds.min.x,-m.bounds.min.y)}for(var M=0;M<v.length;M++){var k=v[M].data;switch(y.translate(.5,.5),y.lineWidth=1,y.strokeStyle="rgba(255,165,0,0.9)",y.setLineDash([1,2]),k.type){case"body":x=k.bounds,y.beginPath(),y.rect(Math.floor(x.min.x-3),Math.floor(x.min.y-3),Math.floor(x.max.x-x.min.x+6),Math.floor(x.max.y-x.min.y+6)),y.closePath(),y.stroke();break;case"constraint":var I=k.pointA;k.bodyA&&(I=k.pointB),y.beginPath(),y.arc(I.x,I.y,10,0,2*Math.PI),y.closePath(),y.stroke()}y.setLineDash([]),y.translate(-.5,-.5)}d.selectStart!==null&&(y.translate(.5,.5),y.lineWidth=1,y.strokeStyle="rgba(255,165,0,0.6)",y.fillStyle="rgba(255,165,0,0.1)",x=d.selectBounds,y.beginPath(),y.rect(Math.floor(x.min.x),Math.floor(x.min.y),Math.floor(x.max.x-x.min.x),Math.floor(x.max.y-x.min.y)),y.closePath(),y.stroke(),y.fill(),y.translate(-.5,-.5)),S.hasBounds&&y.setTransform(1,0,0,1,0,0)};var r=function(d,y){var x=d.engine,v=d.timing,m=v.historySize,S=x.timing.timestamp;v.delta=y-v.lastTime||e._goodDelta,v.lastTime=y,v.timestampElapsed=S-v.lastTimestamp||0,v.lastTimestamp=S,v.deltaHistory.unshift(v.delta),v.deltaHistory.length=Math.min(v.deltaHistory.length,m),v.engineDeltaHistory.unshift(x.timing.lastDelta),v.engineDeltaHistory.length=Math.min(v.engineDeltaHistory.length,m),v.timestampElapsedHistory.unshift(v.timestampElapsed),v.timestampElapsedHistory.length=Math.min(v.timestampElapsedHistory.length,m),v.engineUpdatesHistory.unshift(x.timing.lastUpdatesPerFrame),v.engineUpdatesHistory.length=Math.min(v.engineUpdatesHistory.length,m),v.engineElapsedHistory.unshift(x.timing.lastElapsed),v.engineElapsedHistory.length=Math.min(v.engineElapsedHistory.length,m),v.elapsedHistory.unshift(v.lastElapsed),v.elapsedHistory.length=Math.min(v.elapsedHistory.length,m)},l=function(d){for(var y=0,x=0;x<d.length;x+=1)y+=d[x];return y/d.length||0},g=function(d,y){var x=document.createElement("canvas");return x.width=d,x.height=y,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},h=function(d){var y=d.getContext("2d");return(window.devicePixelRatio||1)/(y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1)},b=function(d,y){var x=d.textures[y];return x||((x=d.textures[y]=new Image).src=y,x)},w=function(d,y){var x=y;/(jpg|gif|png)$/.test(y)&&(x="url("+y+")"),d.canvas.style.background=x,d.canvas.style.backgroundSize="contain",d.currentBackground=y}})()},function(_,T,f){var e={};_.exports=e;var c=f(5),s=f(17),a=f(0);(function(){e._maxFrameDelta=1e3/15,e._frameDeltaFallback=1e3/60,e._timeBufferMargin=1.5,e._elapsedNextEstimate=1,e._smoothingLowerBound=.1,e._smoothingUpperBound=.9,e.create=function(i){var u=a.extend({delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},i);return u.fps=0,u},e.run=function(i,u){return i.timeBuffer=e._frameDeltaFallback,(function o(t){i.frameRequestId=e._onNextFrame(i,o),t&&i.enabled&&e.tick(i,u,t)})(),i},e.tick=function(i,u,o){var t=a.now(),n=i.delta,r=0,l=o-i.timeLastTick;if((!l||!i.timeLastTick||l>Math.max(e._maxFrameDelta,i.maxFrameTime))&&(l=i.frameDelta||e._frameDeltaFallback),i.frameDeltaSmoothing){i.frameDeltaHistory.push(l),i.frameDeltaHistory=i.frameDeltaHistory.slice(-i.frameDeltaHistorySize);var g=i.frameDeltaHistory.slice(0).sort(),h=i.frameDeltaHistory.slice(g.length*e._smoothingLowerBound,g.length*e._smoothingUpperBound);l=p(h)||l}i.frameDeltaSnapping&&(l=1e3/Math.round(1e3/l)),i.frameDelta=l,i.timeLastTick=o,i.timeBuffer+=i.frameDelta,i.timeBuffer=a.clamp(i.timeBuffer,0,i.frameDelta+n*e._timeBufferMargin),i.lastUpdatesDeferred=0;var b=i.maxUpdates||Math.ceil(i.maxFrameTime/n),w={timestamp:u.timing.timestamp};c.trigger(i,"beforeTick",w),c.trigger(i,"tick",w);for(var d=a.now();n>0&&i.timeBuffer>=n*e._timeBufferMargin;){c.trigger(i,"beforeUpdate",w),s.update(u,n),c.trigger(i,"afterUpdate",w),i.timeBuffer-=n,r+=1;var y=a.now()-t,x=a.now()-d,v=y+e._elapsedNextEstimate*x/r;if(r>=b||v>i.maxFrameTime){i.lastUpdatesDeferred=Math.round(Math.max(0,i.timeBuffer/n-e._timeBufferMargin));break}}u.timing.lastUpdatesPerFrame=r,c.trigger(i,"afterTick",w),i.frameDeltaHistory.length>=100&&(i.lastUpdatesDeferred&&Math.round(i.frameDelta/n)>b?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):i.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),i.isFixed!==void 0&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(i.deltaMin||i.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),i.fps!==0&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},e.stop=function(i){e._cancelNextFrame(i)},e._onNextFrame=function(i,u){if(typeof window>"u"||!window.requestAnimationFrame)throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return i.frameRequestId=window.requestAnimationFrame(u),i.frameRequestId},e._cancelNextFrame=function(i){if(typeof window>"u"||!window.cancelAnimationFrame)throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.");window.cancelAnimationFrame(i.frameRequestId)};var p=function(i){for(var u=0,o=i.length,t=0;t<o;t+=1)u+=i[t];return u/o||0}})()},function(_,T,f){var e={};_.exports=e;var c=f(8),s=f(0).deprecated;e.collides=function(a,p){return c.collides(a,p)},s(e,"collides","SAT.collides ➤ replaced by Collision.collides")},function(_,T,f){var e={};_.exports=e,f(1);var c=f(0);e.pathToVertices=function(s,a){typeof window>"u"||"SVGPathSeg"in window||c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var p,i,u,o,t,n,r,l,g,h,b,w=[],d=0,y=0,x=0;a=a||15;var v=function(S,P,A){var B=A%2==1&&A>1;if(!g||S!=g.x||P!=g.y){g&&B?(h=g.x,b=g.y):(h=0,b=0);var C={x:h+S,y:b+P};!B&&g||(g=C),w.push(C),y=h+S,x=b+P}},m=function(S){var P=S.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":y=S.x,x=S.y;break;case"H":y=S.x;break;case"V":x=S.y}v(y,x,S.pathSegType)}};for(e._svgPathToAbsolute(s),u=s.getTotalLength(),n=[],p=0;p<s.pathSegList.numberOfItems;p+=1)n.push(s.pathSegList.getItem(p));for(r=n.concat();d<u;){if((t=n[s.getPathSegAtLength(d)])!=l){for(;r.length&&r[0]!=t;)m(r.shift());l=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=s.getPointAtLength(d),v(o.x,o.y,0)}d+=a}for(p=0,i=r.length;p<i;++p)m(r[p]);return w},e._svgPathToAbsolute=function(s){for(var a,p,i,u,o,t,n=s.pathSegList,r=0,l=0,g=n.numberOfItems,h=0;h<g;++h){var b=n.getItem(h),w=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in b&&(r=b.x),"y"in b&&(l=b.y);else switch("x1"in b&&(i=r+b.x1),"x2"in b&&(o=r+b.x2),"y1"in b&&(u=l+b.y1),"y2"in b&&(t=l+b.y2),"x"in b&&(r+=b.x),"y"in b&&(l+=b.y),w){case"m":n.replaceItem(s.createSVGPathSegMovetoAbs(r,l),h);break;case"l":n.replaceItem(s.createSVGPathSegLinetoAbs(r,l),h);break;case"h":n.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(r),h);break;case"v":n.replaceItem(s.createSVGPathSegLinetoVerticalAbs(l),h);break;case"c":n.replaceItem(s.createSVGPathSegCurvetoCubicAbs(r,l,i,u,o,t),h);break;case"s":n.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(r,l,o,t),h);break;case"q":n.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(r,l,i,u),h);break;case"t":n.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(r,l),h);break;case"a":n.replaceItem(s.createSVGPathSegArcAbs(r,l,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),h);break;case"z":case"Z":r=a,l=p}w!="M"&&w!="m"||(a=r,p=l)}}},function(_,T,f){var e={};_.exports=e;var c=f(6);f(0),e.create=c.create,e.add=c.add,e.remove=c.remove,e.clear=c.clear,e.addComposite=c.addComposite,e.addBody=c.addBody,e.addConstraint=c.addConstraint}])}))});export default ce();
